<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View all expenditure</title>
    <link rel="stylesheet" href="/static/view_all.css">
</head>
<body>
  <!--title of page-->
    <h1>Your Expenditure Till Now Is: </h1>
    <!--div for sorting buttons-->
    <div class="sort-container">
      <!--title for sorting-->
      <h2>Sort By:</h2>
      <!--buttons-->
      <a href="/view?sort=date" class="sort-btn">üìÖ Date (Latest)</a>       <!--button for sorting datewise-->                                                
      <a href="/view?sort=amount_high" class="sort-btn">üí∞ Amount (High ‚Üí Low)</a>          <!--button for sorting by amount (high to low)-->                                            
      <a href="/view?sort=amount_low" class="sort-btn">üí∏ Amount (Low ‚Üí High)</a>            <!--button for sorting by amount (low to high)-->                               
    </div>

    <div class="search-container">    <!-- search by description -->
      <h2>Search Expenses</h2>
      <input type="text" id="searchDescription" placeholder="Search by description...">
    </div>

<!--budget alert-->
    <div class="budget-container">
      <h2>Set Your Budget</h2>
      <input type="number" id="budgetInput" placeholder="Enter your budget amount">
      <button id="setBudgetBtn">Set Budget</button>
      <p id="budgetAlert" class="hidden">‚ö†Ô∏è You have exceeded your budget!</p>
    </div>

<br><br>
    <form method="get" action="/view">
        <select name="category">           <!--Filter the data using categories-->
          <option value="">All Categories</option>
          <option value="Food">Food</option>
          <option value="Travel">Travel</option>
          <option value="Bills">Bills</option>
          <option value="Shopping">Shopping</option>
          <option value="Other">Other</option>
        </select>
      <button type="submit">Filter</button>
    </form>   
      <table id="expenseTable" border="1" cellpadding="10">   <!--table of input data by user-->
        <tr>
          <th>Sr.No.</th>
          <th>Title</th>
          <th>Amount</th>
          <th>Date</th>
          <th>Description</th>
          <th>Category</th>
          <th>Action</th>
        </tr>

        {% for expense in expenses %}
        <tr>
          <td>{{loop.index}}</td>        <!--sr.no.-->
          <td>{{ expense.title }}</td>    <!--title of expenditure-->
          <td>‚Çπ{{ expense.amount }}</td>    <!--expenditure amount-->
          <td>{{ expense.date }}</td>
          <td>{{ expense.description }}</td>
          <td>{{ expense[5] }}</td>        <!--category-->
          <td>
            <!--edit and delete button in sepearte column known as action-->
            <a href="/edit/{{ expense.id }}" class="btn btn-edit">Edit</a>   <!--edit button-->
            <form action="/delete/{{ expense.id }}" method="POST" onsubmit="return confirmDelete()" style="display:inline;"> <!--delete button-->
                <button type="submit" onclick="return confirm('Are you sure?')" class="btn-delete">
                    Delete
                </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </table>
<br>

<!--div for button-->
    <div class="buttonsback">
      <a href="/summary" class="summaryto">Summary</a>        <!--button for going in summary page-->
      <a href="/" class="backhome">Back to home</a>            <!--back to home button going on index page-->
    </div>     
    
    <!--copyright logo-->
    <div class="footer">
      ¬© 2025 Personal Expense Tracker               
    </div>

<script src="{{ url_for('static', filename='js/search.js') }}"></script>
<script src="{{ url_for('static', filename='js/budget.js') }}"></script>


</body>
</html>